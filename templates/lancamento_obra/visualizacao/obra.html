{% extends 'lançamento_obra.html' %}

{% load static %}

{% block 'style' %}
<link rel="stylesheet" href="{% static 'css/table.css' %}">
{% endblock %}

{%block 'caminho'%}
  <li class="breadcrumb-item" aria-current="page">Visualização</li>
  <li class="breadcrumb-item active" aria-current="page">Obra</li>
{%endblock%}

{%block 'header'%}
<h2>Tabela de Obras</h2>
{%endblock%}

{% block 'main' %}
  <table class="table table-hover table-bordered">
    <thead>
      <tr>
        <th scope="col">Cr</th>
        <th scope="col">Orçamento</th>
        <th scope="col">Retrabalho</th>
        <th scope="col">Empresa</th>
        <th scope="col">Cidade</th>
        <th scope="col">Descrição</th>
        <th scope="col">Supervisor</th>
        <th scope="col">Finalizada</th>
        <th scope="col">Indice</th>
        <th scope="col">Etapas</th>
        <th scope="col">Editar</th>

      </tr>
    </thead>
    <tbody>
      
      {% for obra in data %}
        <tr>
          <th scope="row"><p>{{obra.cr}}</p></th>
          <td><p>{{obra.orcamento}}</p></td>
          <td>{%if not obra.retrabalho is Null%}<p>{{obra.retrabalho}}</p>{%endif%}</td>
          <td><p>{{obra.empresa}}</p></td>
          <td><p>{{obra.cidade}}</p></td>
          <td><p>{{obra.descricao}}</p></td>
          <td><p>{{obra.supervisor.supervisor}}</p></td>
          <td>{%if obra.finalizada %}
            <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" checked disabled>
            {%else%}
            <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" disabled>
            {%endif%}
          </td>
          <td><p>{{obra.indice}}</p></td>
          <td><p>{{obra.etapas}}</p></td>
          <td data-bs-toggle="modal" data-bs-target="#update_obra" onclick="editObra('{{obra.cr}}')" class="edit"><a><img src="{% static 'icons/pencil-fill.svg'%}" alt="edit"></a></td>


        </tr>
      {% endfor %}
    </tbody>
  </table> 
{% endblock %}