{% extends 'lançamento_obra.html' %}

{% block 'head' %}
  <script src="colaborador.js"></script>
  <style>
    .main{
      padding: 150px 150px;;
    }
  </style>
  
{% endblock %}

{%block 'caminho'%}
  <li class="breadcrumb-item" aria-current="page">Cadastro</li>
  <li class="breadcrumb-item active" aria-current="page">Função</li>
{%endblock%}

{%block 'header'%}
<h2>Cadastro de funçãor</h2>
{%endblock%}

{% block 'main' %}
  
    <div class="input-group mb-3">
      <label class="input-group-text" for="inputGroupSelect01">Nome da função:</label>
      <input type="text" name="nome" id="nome" class="form-control">
    </div>
  <button id="enviar" class="btn btn-outline-success">Cadastrar</button>

  <script>
    $(document).ready(function() {
      $('#enviar').click(function() {
          $.ajax({
              url: "{% url 'criarFuncao' %}",  // URL da sua API no Django
              type: 'POST',
              data: {
                'csrfmiddlewaretoken':"{{ csrf_token }}",
                'parametro': document.getElementById('nome').value,
              },
              success: function(Response) {
                  if (confirm(Response.message+'\nClique em <OK> para recarregar a página.')){
                    window.location.reload(true); 
                  }
              },  
              error: function(xhr) {
                alert(xhr.responseJSON.message);
              }
          });
      });
    });
  </script>
  {% block 'edit' %}{% endblock %}
{% endblock %}